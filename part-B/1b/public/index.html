<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Employee Management System</title>
  </head>
  <body>
    <form action="/add" method="post">
      <!-- USN field -->
      <label for="usn"
        >Enter your USN:
        <input
          type="text"
          name="usn"
          id="usn"
          required
          pattern="1[Mm][Ss]\d{2}[A-Za-z]{2}\d{3}"
          placeholder="eg. 1MS22CS086" /></label
      ><br /><br />

      <!-- Name field -->
      <label for="name"
        >Enter your Name:
        <input
          type="text"
          name="name"
          id="name"
          required
          pattern=".{3,}" /></label
      ><br /><br />

      <!-- Subject code field -->
      <label for="sub"
        >Enter your Sub-code:
        <input list="sub-code" name="sub" />
        <datalist id="sub-code">
          <option value="CS51">
            Artificial Intelligence and Machine Learning
          </option>
          <option value="AL61">Management and Entrepreneurship</option>
          <option value="CSL66">Web Lab</option>
        </datalist> </label
      ><br /><br />

      <!-- Marks field -->
      <label for="marks"
        >Enter your Marks:
        <input
          type="number"
          name="marks"
          id="marks"
          required
          pattern="\d+" /></label
      ><br /><br />
      <input type="submit" value="Submit Form" />
    </form>
    <table>
        <tr>
            <th>USN</th>
            <th>Name</th>
            <th>Subject</th>
            <th>Marks</th>
            <th>Delete</th>
        </tr>
    </table>
    <button onclick="getData()">Fetch Data</button>

    <script>
        async function getData(){
            const response = await fetch("/get")
            if(response.ok){
                const students = await response.json()
                students.forEach(element => {
                    console.log(element)
                });
            }
        }
    </script>
  </body>
</html>
